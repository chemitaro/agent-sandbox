---
種別: 実装計画書
機能ID: "GC-001"
機能名: "未使用ファイルの棚卸しと削除"
関連Issue: ["TBD"]
状態: "draft"
作成者: "Codex"
最終更新: "2026-01-23"
依存: ["requirement.md", "design.md"]
---

# GC-001 未使用ファイルの棚卸しと削除 — 実装計画（TDD: Red → Green → Refactor）

## この計画で満たす要件ID (必須)
- 対象AC: AC-001, AC-002, AC-003
- 対象EC: EC-001, EC-002
- 対象制約: 非交渉制約（CLI/起動フロー維持、禁止 Git 操作、`.agent-home` を残す、`.env.example` 保持）

## ステップ一覧（観測可能な振る舞い） (必須)
- [ ] S01: 未使用ファイルの削除/リネームが完了し、参照残存チェックで参照が残らない
- [ ] S02: `Makefile` が `install` / `help` のみに整理され、ヘルプが最新化される
- [ ] S03: tmux + エージェント起動の補助スクリプト/ドキュメントが削除され、参照が残らない

### 要件 ↔ ステップ対応表 (必須)
- AC-001 → S01
- AC-002 → S01
- AC-003 → S01, S02, S03
- EC-001 → S01
- EC-002 → S01
- 非交渉制約 → S01, S02, S03

---

## 実装ステップ（各ステップは“観測可能な振る舞い”を1つ） (必須)

### S01 — 未使用ファイルの削除/リネーム (必須)
- 対象: AC-001 / AC-002 / EC-001 / EC-002
- 設計参照:
  - 対象IF/API: 該当なし
  - 対象テスト: `tests/*.sh`（必要に応じて）
- このステップで「追加しないこと（スコープ固定）」:
  - 新機能追加やリファクタリングは行わない

#### update_plan（着手時に登録） (必須)
- [ ] `update_plan` に、このステップの作業ステップ（調査/Red/Green/Refactor/品質ゲート/報告/コミット）を登録した

#### 期待する振る舞い（テストケース） (必須)
- Given: リポジトリ全体の参照調査が完了している
- When: 未使用ファイルの削除/リネームを実施する
- Then: `rg` による参照残存チェックで該当ファイルが見つからない
- 観測点（UI/HTTP/DB/Log など）: `rg` 検索結果
- 追加/更新するテスト: なし

#### Red（失敗するテストを先に書く） (任意)
- 該当なし（削除作業のため）

#### Green（最小実装） (任意)
- 変更予定ファイル:
  - Delete: `sandbox.config`, `docker-compose.git-ro.yml`, `scripts/generate-git-ro-overrides.sh`, `scripts/get-tmux-session.sh`, `product/.keep`
  - Move/Rename: `sandbox.config.example` → `.env.example`
  - Modify: `.env.example`, `.gitignore`
- 実装方針: 参照無しを確認して削除、必要ファイルはリネームし文言更新

#### Refactor（振る舞い不変で整理） (任意)
- 該当なし

#### ステップ末尾（省略しない） (必須)
- [ ] 期待するテスト（必要ならフォーマット/リンタ）を実行し、成功した
- [ ] `.spec-dock/current/report.md` に実行コマンド/結果/変更ファイルを記録した
- [ ] `update_plan` を更新し、このステップの作業ステップを完了にした
- [ ] コミットした（エージェント）

---

### S02 — `Makefile` の公開コマンド整理 (必須)
- 対象: AC-003
- 設計参照:
  - 対象IF/API: 該当なし
  - 対象テスト: なし
- このステップで「追加しないこと（スコープ固定）」:
  - tmux/エージェント関連のコマンド復活はしない

#### update_plan（着手時に登録） (必須)
- [ ] `update_plan` に、このステップの作業ステップ（調査/Red/Green/Refactor/品質ゲート/報告/コミット）を登録した

#### 期待する振る舞い（テストケース） (必須)
- Given: `Makefile` の公開コマンドが整理されていない
- When: `Makefile` を更新する
- Then: `make help` が `install` / `help` のみを表示し、不要な変数・情報が除去される
- 観測点（UI/HTTP/DB/Log など）: `Makefile` の内容
- 追加/更新するテスト: なし

#### Red（失敗するテストを先に書く） (任意)
- 該当なし

#### Green（最小実装） (任意)
- 変更予定ファイル:
  - Modify: `Makefile`
- 実装方針: 変数・ヘルプの整理のみを行う

#### Refactor（振る舞い不変で整理） (任意)
- 該当なし

#### ステップ末尾（省略しない） (必須)
- [ ] 期待するテスト（必要ならフォーマット/リンタ）を実行し、成功した
- [ ] `.spec-dock/current/report.md` に実行コマンド/結果/変更ファイルを記録した
- [ ] `update_plan` を更新し、このステップの作業ステップを完了にした
- [ ] コミットした（エージェント）

---

### S03 — tmux + エージェント補助の削除 (必須)
- 対象: AC-003
- 設計参照:
  - 対象IF/API: 該当なし
  - 対象テスト: なし
- このステップで「追加しないこと（スコープ固定）」:
  - tmux 起動機能を別経路で再実装しない

#### update_plan（着手時に登録） (必須)
- [ ] `update_plan` に、このステップの作業ステップ（調査/Red/Green/Refactor/品質ゲート/報告/コミット）を登録した

#### 期待する振る舞い（テストケース） (必須)
- Given: tmux + エージェント起動の補助スクリプトが存在する
- When: 削除と参照更新を行う
- Then: リポジトリ内に `tmux-claude` / `tmux-codex` / `tmux-opencode` の参照が残らない
- 観測点（UI/HTTP/DB/Log など）: `rg` 検索結果
- 追加/更新するテスト: なし

#### Green（最小実装） (任意)
- 変更予定ファイル:
  - Delete: `scripts/tmux-claude`, `scripts/tmux-codex`, `scripts/tmux-opencode`
  - Modify: `Dockerfile`, `README.md`, `CLAUDE.md`

#### ステップ末尾（省略しない） (必須)
- [ ] 期待するテスト（必要ならフォーマット/リンタ）を実行し、成功した
- [ ] `.spec-dock/current/report.md` に実行コマンド/結果/変更ファイルを記録した
- [ ] `update_plan` を更新し、このステップの作業ステップを完了にした
- [ ] コミットした（エージェント）

---

## 未確定事項（TBD） (必須)
- 該当なし

## 完了条件（Definition of Done） (必須)
- 対象AC/ECがすべて満たされ、参照残存が無い
- MUST NOT / OUT OF SCOPE を破っていない（追加機能を入れていない）
- 品質ゲート（該当する場合）が満たされている

## 省略/例外メモ (必須)
- 該当なし
